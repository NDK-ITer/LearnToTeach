@page
@model PrivacyModel
@{
    ViewData["Title"] = "Privacy Policy";
}
<h1>@ViewData["Title"]</h1>

<script src="https://cdnjs.cloudflare.com/ajax/libs/signalr/5.0.12/signalr.min.js"></script>

<script>
    var connection = new signalR.HubConnectionBuilder().withUrl("/myHub").build();

    connection.on("ReceiveMessage", function (user, message) {
        console.log("Nhận tin nhắn từ server: " + message);
    });

    connection.start().then(function () {
        console.log("Đã kết nối tới SignalR Hub");
    }).catch(function (err) {
        console.error("lỗi kết nối tới SignalR Hub: " + err.toString());
    });

    function sendMessage() {
        var user = document.getElementById("userInput").value;
        var message = document.getElementById("messageInput").value;
        connection.invoke("SendMessage", user, message).catch(function (err) {
            console.error("Lỗi: "+err.toString());
        });
    }
</script>

<h1>Kết nối tới SignalR Hub trong mô hình client to server</h1>

<input type="text" id="userInput" placeholder="Người dùng" />
<input type="text" id="messageInput" placeholder="Tin nhắn" />
<button onclick="sendMessage()">Gửi tin nhắn</button>

